大致流程：

1. 微信支付用户点击消息或者扫描二维码在微信浏览器打开了商户 H5 页面，接着在页面请求生成支付订单
2. 商户的后台系统生成商户订单，并且调用统一下单 API
3. 微信支付系统返回预付单的信息（prepay_id）
4. 商户的后台系统生成 JS-API 页面调用的支付参数并签名，然后给微信客户端返回支付参数（prepay_id，paySign）
5. 用户点击发起支付
6. JS-API 接口向微信支付系统请求支付
7. 微信支付系统检查参数的合法性和授权域权限，并返回验证结果，并要求支付授权
8. 微信客户端提示输入密码
9. 用户确认支付输入密码，并提交支付授权到微信支付系统
10. 微信支付系统验证授权，异步通知商户支付结果
11. 商户后台告知微信支付系统处理结果
12. 微信支付系统同时返回支付结果给微信客户端，并发微信消息提示展示给用户
13. 微信客户端跳转回商户 H5 页面
14. 微信客户端查询商户后台支付结果
15. 商户发货及支付后个性化页面提示
